<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">
    <update handle="customer_account"/>
    <body>
        <referenceBlock name="page.main.title">
            <block class="Aheadworks\Ca\Block\ButtonWithCheckAcl"
                   name="aw.ca.company.edit_link" before="-">
                <arguments>
                    <argument name="label" xsi:type="string">Edit</argument>
                    <argument name="link" xsi:type="string">aw_ca/company/edit</argument>
                </arguments>
            </block>
        </referenceBlock>
        <referenceContainer name="content">
            <block name="aw.ca.company.information"
                   cacheable="false"
                   template="Aheadworks_Ca::company/information.phtml">
                <arguments>
                    <argument name="company_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Company</argument>
                    <argument name="customer_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Customer</argument>
                    <argument name="formatter_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Formatter</argument>
                </arguments>
                <block class="Aheadworks\Ca\Block\Company\ChangeCompanyAdminButton"
                       name="aw.ca.company.admin.action.change"
                       template="Aheadworks_Ca::company/change_company_admin_button.phtml">
                    <arguments>
                        <argument name="customer_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Customer</argument>
                        <argument name="layout_modifier" xsi:type="object">Aheadworks\Ca\ViewModel\Company\NewAdminSelection\LayoutModifier</argument>
                        <argument name="jsLayout" xsi:type="array">
                            <item name="components" xsi:type="array">
                                <item name="aw_ca_change_company_admin" xsi:type="array">
                                    <item name="component" xsi:type="string">uiCollection</item>
                                    <item name="deps" xsi:type="array">
                                        <item name="0" xsi:type="string">awCaCompanyAdminSelectionProvider</item>
                                    </item>
                                    <item name="children" xsi:type="array">
                                        <item name="change_admin_button" xsi:type="array">
                                            <item name="component" xsi:type="string">Magento_Ui/js/form/components/button</item>
                                            <item name="template" xsi:type="string">ui/form/components/button/simple</item>
                                            <item name="sortOrder" xsi:type="number">10</item>
                                            <item name="formElement" xsi:type="string">container</item>
                                            <item name="actions" xsi:type="array">
                                                <item name="0" xsi:type="array">
                                                    <item name="targetName" xsi:type="string">${ $.parentName }.new_admin_selection_modal</item>
                                                    <item name="actionName" xsi:type="string">toggleModal</item>
                                                </item>
                                            </item>
                                            <item name="title" xsi:type="string" translate="true">Change</item>
                                            <item name="additionalClasses" xsi:type="string">admin__field-small</item>
                                            <item name="buttonClasses" xsi:type="string">action primary change-company-admin</item>
                                            <item name="dataScope" xsi:type="string"/>
                                            <item name="provider" xsi:type="string">awCaCompanyAdminSelectionProvider</item>
                                        </item>
                                        <item name="new_admin_selection_modal" xsi:type="array">
                                            <item name="component" xsi:type="string">Aheadworks_Ca/js/ui/form/element/admin-selection-modal</item>
                                            <item name="componentType" xsi:type="string">modal</item>
                                            <item name="changeUrl" xsi:type="url" path="aw_ca/company/selectNewAdmin"/>
                                            <item name="changeConfirmationMessage" xsi:type="string" translate="true"><![CDATA[Company Administrator information will be changed. </br> Upon Saving, a new Company Administrator will be appointed. </br> </br> Would you like to proceed?]]></item>
                                            <item name="dataScope" xsi:type="string"/>
                                            <item name="sortOrder" xsi:type="number">20</item>
                                            <item name="deps" xsi:type="array">
                                                <item name="0" xsi:type="string">awCaCompanyAdminSelectionProvider</item>
                                            </item>
                                            <item name="provider" xsi:type="string">awCaCompanyAdminSelectionProvider</item>
                                            <item name="options" xsi:type="array">
                                                <item name="title" xsi:type="string" translate="true">Select New Company Administrator</item>
                                                <item name="buttons" xsi:type="array">
                                                    <item name="0" xsi:type="array">
                                                        <item name="text" xsi:type="string" translate="true">Cancel</item>
                                                        <item name="actions" xsi:type="array">
                                                            <item name="0" xsi:type="string">closeModal</item>
                                                        </item>
                                                    </item>
                                                    <item name="1" xsi:type="array">
                                                        <item name="text" xsi:type="string" translate="true">Select for Approval</item>
                                                        <item name="class" xsi:type="string">action primary action-basic</item>
                                                        <item name="actions" xsi:type="array">
                                                            <item name="0" xsi:type="string">actionSelect</item>
                                                        </item>
                                                    </item>
                                                </item>
                                            </item>
                                            <item name="children" xsi:type="array">
                                                <item name="customer_selection_listing_wrapper" xsi:type="array">
                                                    <item name="component" xsi:type="string">uiComponent</item>
                                                    <item name="template" xsi:type="string">Aheadworks_UiComponents/collection-wrapper</item>
                                                    <item name="additionalClasses" xsi:type="string">aw-ui-listing aw_ca__customer-listing</item>
                                                    <item name="children" xsi:type="array">
                                                        <item name="aw_ca_customer_listing" xsi:type="array">
                                                            <item name="component" xsi:type="string">Magento_Ui/js/form/components/insert-listing</item>
                                                            <item name="dataScope" xsi:type="string">data.new_admin_selected</item>
                                                            <item name="provider" xsi:type="string">awCaCompanyAdminSelectionProvider</item>
                                                            <item name="autoRender" xsi:type="boolean">true</item>
                                                            <item name="render_url" xsi:type="url" path="mui/index/render"/>
                                                            <item name="update_url" xsi:type="url" path="mui/index/render"/>
                                                            <item name="externalProvider" xsi:type="string">${ $.ns }.aw_ca_customer_listing_data_source</item>
                                                            <item name="selectionsProvider" xsi:type="string">${ $.ns }.aw_ca_customer_listing.customer_columns.ids</item>
                                                            <item name="ns" xsi:type="string">aw_ca_customer_listing</item>
                                                            <item name="realTimeLink" xsi:type="boolean">true</item>
                                                            <item name="dataLinks" xsi:type="array">
                                                                <item name="imports" xsi:type="boolean">true</item>
                                                                <item name="exports" xsi:type="boolean">false</item>
                                                            </item>
                                                            <item name="imports" xsi:type="array">
                                                                <item name="company_id" xsi:type="string">${ $.provider }:data.company.id</item>
                                                            </item>
                                                            <item name="exports" xsi:type="array">
                                                                <item name="company_id" xsi:type="string">${ $.externalProvider }:params.company_id</item>
                                                            </item>
                                                        </item>
                                                    </item>
                                                </item>
                                            </item>
                                        </item>
                                    </item>
                                </item>
                                <item name="awCaCompanyAdminSelectionProvider" xsi:type="array">
                                    <item name="component" xsi:type="string">Magento_Ui/js/form/provider</item>
                                </item>
                            </item>
                        </argument>
                    </arguments>
                </block>
                <block name="aw.ca.company.sales.rep.information"
                       as="aw_ca_sales_rep_info"
                       template="Aheadworks_Ca::company/sales_rep_information.phtml">
                    <arguments>
                        <argument name="company_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Company</argument>
                        <argument name="customer_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Customer</argument>
                        <argument name="formatter_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Formatter</argument>
                    </arguments>
                </block>
            </block>
            <block name="aw.ca.company.restriction.allowed-shipping-methods"
                   template="Aheadworks_Ca::company/restriction/allowed_shipping_methods.phtml">
                <arguments>
                    <argument name="shipping_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Restriction\AllowedShippingMethods</argument>
                </arguments>
            </block>
            <block name="aw.ca.company.domain"
                   template="Aheadworks_Ca::company/domain/section.phtml">
                <arguments>
                    <argument name="customer_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Customer</argument>
                </arguments>
                <block class="Aheadworks\Ca\Block\Form"
                       name="aw.ca.company.domain.management"
                       template="Aheadworks_Ca::company/domain/management.phtml">
                    <arguments>
                        <argument name="form_view_model" xsi:type="object">Aheadworks\Ca\ViewModel\Company\Domain\Form</argument>
                        <argument name="jsLayout" xsi:type="array">
                            <item name="components" xsi:type="array">
                                <item name="aw_ca_domain_management" xsi:type="array">
                                    <item name="component" xsi:type="string">uiCollection</item>
                                    <item name="deps" xsi:type="array">
                                        <item name="0" xsi:type="string">awCaDomainProvider</item>
                                    </item>
                                    <item name="children" xsi:type="array">
                                        <item name="add_domain_button" xsi:type="array">
                                            <item name="component" xsi:type="string">Magento_Ui/js/form/components/button</item>
                                            <item name="template" xsi:type="string">ui/form/components/button/simple</item>
                                            <item name="sortOrder" xsi:type="number">10</item>
                                            <item name="formElement" xsi:type="string">container</item>
                                            <item name="actions" xsi:type="array">
                                                <item name="0" xsi:type="array">
                                                    <item name="targetName" xsi:type="string">${ $.parentName }.domain_configuration_modal</item>
                                                    <item name="actionName" xsi:type="string">toggleModal</item>
                                                </item>
                                            </item>
                                            <item name="title" xsi:type="string" translate="true">Add New Domain</item>
                                            <item name="additionalClasses" xsi:type="string">admin__field-small</item>
                                            <item name="buttonClasses" xsi:type="string">action primary add-new-domain</item>
                                            <item name="dataScope" xsi:type="string"/>
                                            <item name="provider" xsi:type="string">awCaDomainProvider</item>
                                        </item>
                                        <item name="domain_configuration_modal" xsi:type="array">
                                            <item name="component" xsi:type="string">Aheadworks_Ca/js/ui/form/element/domain-configuration-modal</item>
                                            <item name="componentType" xsi:type="string">modal</item>
                                            <item name="saveUrl" xsi:type="url" path="aw_ca/company_domain/save"/>
                                            <item name="dataScope" xsi:type="string"/>
                                            <item name="sortOrder" xsi:type="number">20</item>
                                            <item name="deps" xsi:type="array">
                                                <item name="0" xsi:type="string">awCaDomainProvider</item>
                                            </item>
                                            <item name="provider" xsi:type="string">awCaDomainProvider</item>
                                            <item name="options" xsi:type="array">
                                                <item name="title" xsi:type="string" translate="true">Configure Domain</item>
                                                <item name="buttons" xsi:type="array">
                                                    <item name="0" xsi:type="array">
                                                        <item name="text" xsi:type="string" translate="true">Cancel</item>
                                                        <item name="actions" xsi:type="array">
                                                            <item name="0" xsi:type="string">closeModal</item>
                                                        </item>
                                                    </item>
                                                    <item name="1" xsi:type="array">
                                                        <item name="text" xsi:type="string" translate="true">Send for Approval</item>
                                                        <item name="class" xsi:type="string">action primary action-basic</item>
                                                        <item name="actions" xsi:type="array">
                                                            <item name="0" xsi:type="string">actionSave</item>
                                                        </item>
                                                    </item>
                                                </item>
                                            </item>
                                            <item name="children" xsi:type="array">
                                                <item name="domain_configuration" xsi:type="array">
                                                    <item name="component" xsi:type="string">Magento_Ui/js/form/components/fieldset</item>
                                                    <item name="label" xsi:type="string"/>
                                                    <item name="template" xsi:type="string">Aheadworks_Ca/form/element/fieldset</item>
                                                    <item name="elementType" xsi:type="string">fieldset</item>
                                                    <item name="dataScope" xsi:type="string">data.domain</item>
                                                    <item name="children" xsi:type="array">
                                                        <item name="name" xsi:type="array">
                                                            <item name="component" xsi:type="string">Magento_Ui/js/form/element/abstract</item>
                                                            <item name="dataScope" xsi:type="string">name</item>
                                                            <item name="provider" xsi:type="string">awCaDomainProvider</item>
                                                            <item name="template" xsi:type="string">ui/form/field</item>
                                                            <item name="label" xsi:type="string" translate="true">Domain Name</item>
                                                            <item name="validation" xsi:type="array">
                                                                <item name="required-entry" xsi:type="boolean">true</item>
                                                            </item>
                                                            <item name="sortOrder" xsi:type="number">30</item>
                                                        </item>
                                                    </item>
                                                </item>
                                            </item>
                                        </item>
                                    </item>
                                </item>
                                <item name="awCaDomainProvider" xsi:type="array">
                                    <item name="component" xsi:type="string">Magento_Ui/js/form/provider</item>
                                </item>
                            </item>
                        </argument>
                    </arguments>
                </block>
                <block class="Magento\Ui\Block\Wrapper"
                       name="aw.ca.company.domain.listing"
                       template="Aheadworks_Ca::company/domain/listing.phtml">
                    <arguments>
                        <argument name="uiComponent" xsi:type="string">aw_ca_company_domain_listing</argument>
                        <argument name="additionalClasses" xsi:type="string">aw_ca__domain-listing</argument>
                    </arguments>
                </block>
            </block>
        </referenceContainer>
    </body>
</page>
