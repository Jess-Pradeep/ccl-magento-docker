<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
    <table name="aw_cl_customer_group_credit_limit" resource="default" engine="innodb"
           comment="Customer Group Credit Limit table">
        <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true" comment="ID"/>
        <column xsi:type="int" name="customer_group_id" padding="10" unsigned="true" nullable="false" identity="false"
                comment="Customer Group ID"/>
        <column xsi:type="smallint" name="website_id" padding="5" unsigned="true" nullable="false" identity="false"
                comment="Website ID"/>
        <column xsi:type="decimal" name="credit_limit" scale="4" precision="12" unsigned="false" nullable="false"
                default="0" comment="Credit limit"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="id"/>
        </constraint>
        <constraint xsi:type="foreign" referenceId="FK_AE5FEFFB163ED891CDD390152EB32B9E"
                    table="aw_cl_customer_group_credit_limit" column="customer_group_id" referenceTable="customer_group"
                    referenceColumn="customer_group_id" onDelete="CASCADE"/>
        <constraint xsi:type="foreign" referenceId="AW_CL_CSTR_GROUP_CREDIT_LIMIT_WS_ID_STORE_WS_WS_ID"
                    table="aw_cl_customer_group_credit_limit" column="website_id" referenceTable="store_website"
                    referenceColumn="website_id" onDelete="CASCADE"/>
        <index referenceId="AW_CL_CUSTOMER_GROUP_CREDIT_LIMIT_CUSTOMER_GROUP_ID" indexType="btree">
            <column name="customer_group_id"/>
        </index>
        <index referenceId="AW_CL_CUSTOMER_GROUP_CREDIT_LIMIT_WEBSITE_ID" indexType="btree">
            <column name="website_id"/>
        </index>
    </table>
    <table name="aw_cl_credit_summary" resource="default" engine="innodb" comment="Credit Summary Table">
        <column xsi:type="int" name="summary_id" padding="10" unsigned="true" nullable="false" identity="true"
                comment="Summary ID"/>
        <column xsi:type="smallint" name="website_id" padding="5" unsigned="true" nullable="true" identity="false"
                comment="Website ID"/>
        <column xsi:type="int" name="customer_id" padding="10" unsigned="true" nullable="false" identity="false"
                comment="Customer ID"/>
        <column xsi:type="decimal" name="credit_limit" scale="4" precision="12" unsigned="false" nullable="true"
                comment="Credit Limit"/>
        <column xsi:type="boolean" name="is_allowed_to_exceed" nullable="false" default="false"
                comment="Is Allowed To Exceed Credit Limit"/>
        <column xsi:type="decimal" name="credit_balance" scale="4" precision="12" unsigned="false" nullable="false"
                default="0" comment="Credit Balance"/>
        <column xsi:type="varchar" name="currency" nullable="false" length="3" comment="Credit Limit Currency"/>
        <column xsi:type="timestamp" name="last_payment_date" on_update="false" nullable="true"
                comment="Last Payment Date"/>
        <column xsi:type="int" name="company_id" padding="10" unsigned="true" nullable="true" identity="false"
                comment="Company ID"/>
        <column xsi:type="int" name="payment_period" padding="10" unsigned="true" nullable="true" identity="false"
                comment="Payment Period for the Credit Limit (in days)"/>
        <column xsi:type="timestamp" name="due_date" on_update="false" nullable="true"
                comment="Due Date"/>
        <column xsi:type="timestamp" name="last_due_date" on_update="false" nullable="true"
                comment="Last Due Date"/>
        <column xsi:type="timestamp" name="negative_balance_date" on_update="false" nullable="true"
                comment="Negative Balance Date"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="summary_id"/>
        </constraint>
        <constraint xsi:type="foreign" referenceId="AW_CL_CREDIT_SUMMARY_CUSTOMER_ID_CUSTOMER_ENTITY_ENTITY_ID"
                    table="aw_cl_credit_summary" column="customer_id" referenceTable="customer_entity"
                    referenceColumn="entity_id" onDelete="CASCADE"/>
        <constraint xsi:type="foreign" referenceId="AW_CL_CREDIT_SUMMARY_WEBSITE_ID_STORE_WEBSITE_WEBSITE_ID"
                    table="aw_cl_credit_summary" column="website_id" referenceTable="store_website"
                    referenceColumn="website_id" onDelete="SET NULL"/>
        <index referenceId="AW_CL_CREDIT_SUMMARY_CUSTOMER_ID" indexType="btree">
            <column name="customer_id"/>
        </index>
        <index referenceId="AW_CL_CREDIT_SUMMARY_WEBSITE_ID" indexType="btree">
            <column name="website_id"/>
        </index>
    </table>
    <table name="aw_cl_transaction" resource="default" engine="innodb" comment="Credit Limit Transaction Table">
        <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true"
                comment="Transaction ID"/>
        <column xsi:type="int" name="summary_id" padding="10" unsigned="true" nullable="true" identity="false"
                comment="Summary ID"/>
        <column xsi:type="int" name="company_id" padding="10" unsigned="true" nullable="true" identity="false"
                comment="Company ID"/>
        <column xsi:type="timestamp" name="created_at" on_update="false" nullable="false" default="CURRENT_TIMESTAMP"
                comment="Created At"/>
        <column xsi:type="varchar" name="action" nullable="false" length="150" comment="Action"/>
        <column xsi:type="decimal" name="amount" scale="4" precision="12" unsigned="false" nullable="false" default="0"
                comment="Amount"/>
        <column xsi:type="decimal" name="credit_limit" scale="4" precision="12" unsigned="false" nullable="false"
                default="0" comment="Credit Limit"/>
        <column xsi:type="decimal" name="credit_balance" scale="4" precision="12" unsigned="false" nullable="false"
                default="0" comment="Credit Balance"/>
        <column xsi:type="decimal" name="credit_available" scale="4" precision="12" unsigned="false" nullable="false"
                default="0" comment="Credit Available"/>
        <column xsi:type="varchar" name="credit_currency" nullable="false" length="3" comment="Credit Currency"/>
        <column xsi:type="varchar" name="action_currency" nullable="false" length="3" comment="Action Currency"/>
        <column xsi:type="decimal" name="rate_to_credit_currency" scale="12" precision="24" unsigned="false"
                nullable="true" default="0" comment="Rate to Credit Currency"/>
        <column xsi:type="decimal" name="rate_to_action_currency" scale="12" precision="24" unsigned="false"
                nullable="false" default="0" comment="Rate to Action Currency"/>
        <column xsi:type="varchar" name="po_number" nullable="true" length="32" comment="Purchase Order Number"/>
        <column xsi:type="varchar" name="updated_by" nullable="true" length="150" comment="Updated By"/>
        <column xsi:type="varchar" name="comment_to_customer" nullable="true" length="255"
                comment="Comment to Customer"/>
        <column xsi:type="varchar" name="comment_to_customer_placeholder" nullable="true" length="255"
                comment="Comment to Customer Placeholder"/>
        <column xsi:type="varchar" name="comment_to_admin" nullable="true" length="255" comment="Comment to Admin"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="id"/>
        </constraint>
        <constraint xsi:type="foreign" referenceId="AW_CL_TRANSACTION_SUMMARY_ID_AW_CL_CREDIT_SUMMARY_SUMMARY_ID"
                    table="aw_cl_transaction" column="summary_id" referenceTable="aw_cl_credit_summary"
                    referenceColumn="summary_id" onDelete="CASCADE"/>
        <index referenceId="AW_CL_TRANSACTION_SUMMARY_ID" indexType="btree">
            <column name="summary_id"/>
        </index>
    </table>
    <table name="aw_cl_transaction_entity" resource="default" engine="innodb"
           comment="Credit Limit Transaction Entity Table">
        <column xsi:type="int" name="transaction_id" padding="10" unsigned="true" nullable="false" identity="false"
                comment="Transaction ID"/>
        <column xsi:type="varchar" name="entity_type" nullable="false" length="150" comment="Entity Type"/>
        <column xsi:type="int" name="entity_id" padding="10" unsigned="true" nullable="false" identity="false"
                comment="Entity ID"/>
        <column xsi:type="varchar" name="entity_label" nullable="true" length="255" comment="Entity Label"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="transaction_id"/>
            <column name="entity_type"/>
            <column name="entity_id"/>
        </constraint>
        <constraint xsi:type="foreign" referenceId="AW_CL_TRANSACTION_ENTITY_TRANSACTION_ID_AW_CL_TRANSACTION_ID"
                    table="aw_cl_transaction_entity" column="transaction_id" referenceTable="aw_cl_transaction"
                    referenceColumn="id" onDelete="CASCADE"/>
        <index referenceId="AW_CL_TRANSACTION_ENTITY_TRANSACTION_ID_ENTITY_TYPE_ENTITY_ID" indexType="btree">
            <column name="transaction_id"/>
            <column name="entity_type"/>
            <column name="entity_id"/>
        </index>
    </table>
    <table name="aw_cl_job" resource="default" engine="innodb" comment="Credit Limit Job Table">
        <column xsi:type="int" name="id" padding="10" unsigned="true" nullable="false" identity="true"
                comment="Job ID"/>
        <column xsi:type="varchar" name="type" nullable="false" length="255" comment="Job Type"/>
        <column xsi:type="text" name="configuration" nullable="false" comment="Job Name"/>
        <column xsi:type="varchar" name="status" nullable="false" length="20" comment="Job Status"/>
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="id"/>
        </constraint>
    </table>
</schema>
